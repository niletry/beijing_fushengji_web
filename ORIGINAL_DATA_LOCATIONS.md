# 📦 原版游戏数据位置分析

## 🎯 数据来源总结

### 1. **商品数据 (Goods/Drug Data)**

#### 位置
**文件**: `SelectionDlg.cpp`  
**行号**: 352-360 行（初始化代码）

#### 原始代码
```cpp
// init the goods' name 
strcpy(m_chDrugName[0],"进口香烟"); 
strcpy(m_chDrugName[1],"走私汽车");
strcpy(m_chDrugName[2],"盗版VCD、游戏");     
strcpy(m_chDrugName[3],"假白酒（剧毒！）");
strcpy(m_chDrugName[4],"《上海小宝贝》（禁书）");  
strcpy(m_chDrugName[5],"进口玩具");
strcpy(m_chDrugName[7],"伪劣化妆品");        
strcpy(m_chDrugName[6],"水货手机");
strcpy(m_chDrugName[8],"");
```

#### 对应关系
| 索引 | 原版名称 | Web版名称 | 匹配 |
|------|----------|----------|------|
| 0 | 进口香烟 | 进口香烟 | ✅ |
| 1 | 走私汽车 | 走私汽车 | ✅ |
| 2 | 盗版VCD、游戏 | 盗版VCD | ⚠️ 简化 |
| 3 | 假白酒（剧毒！） | 山西假白酒 | ⚠️ 修改 |
| 4 | 《上海小宝贝》（禁书） | 禁书《上海小宝贝》 | ⚠️ 顺序调整 |
| 5 | 进口玩具 | 进口玩具 | ✅ |
| 6 | 水货手机 | 水货手机 | ✅ |
| 7 | 伪劣化妆品 | 伪劣化妆品 | ✅ |

#### 发现的差异

1. **索引顺序不同**
   - 原版：6和7位置互换
   - Web版：按0-7顺序排列

2. **名称微调**
   - 原版：`盗版VCD、游戏`  
   - Web版：`盗版VCD`  
   - **建议**: 恢复为 `盗版VCD和游戏` 更原汁原味

   - 原版：`假白酒（剧毒！）`  
   - Web版：`山西假白酒`  
   - **建议**: 恢复为 `假白酒` 保持原味

   - 原版：`《上海小宝贝》（禁书）`  
   - Web版：`禁书《上海小宝贝》`  
   - **建议**: 保留括号形式更原汁原味

---

### 2. **地点数据 (Location Data)**

#### 搜索结果
- **未找到**: 在SelectionDlg.cpp中未发现类似商品的硬编码地点数据
- **可能位置**:
  1. 可能在资源文件(.rc)中
  2. 可能在其他.cpp文件中
  3. 可能在初始化函数的其他位置

#### Web版当前地点
```javascript
export const LOCATIONS = [
    { id: 0, name: '中关村', icon: '🖥️' },
    { id: 1, name: '西单', icon: '🏬' },
    { id: 2, name: '王府井', icon: '🛍️' },
    { id: 3, name: '秀水街', icon: '👔' },
    { id: 4, name: '大栅栏', icon: '🏮' },
    { id: 5, name: '燕莎', icon: '💎' },
    { id: 6, name: '三里屯', icon: '🍺' },
    { id: 7, name: '798', icon: '🎨' }
];
```

**状态**: 需要进一步确认这些地点是否与原版完全一致

---

### 3. **随机事件 (Random Events)**

#### 位置
**文件**: `SelectionDlg.cpp`  
**行号**: 约126-150行（事件数据结构）

#### 已发现的事件片段
```cpp
{41, "？？某电子2000？？学？？，VCD？？片？", 2, 4, 0, 0},
{18, "？？？十？？？取？？关？？全？VCD？？大!", 2, 0, 8, 0},
```

**注意**: 由于编码问题，具体内容需要进一步解析

#### Web版随机事件
```javascript
export const RANDOM_EVENTS = [
    { 
        id: 0, 
        description: '警察在街上巡逻，抓到了一些走私商贩',
        affects: { goodId: 1, priceMultiplier: 1.5 }
    },
    // ... 更多事件
];
```

**状态**: 需要对比原版事件确保一致性

---

## 📋 数据对比清单

### 已确认的数据来源

| 数据类型 | 原版位置 | Web版文件 | 完整度 |
|----------|----------|----------|--------|
| **商品名称** | SelectionDlg.cpp:352-360 | data.js | 90% ⚠️ |
| **商品图标** | ❌ 未找到（可能无） | data.js | 新增 ✨ |
| **地点名称** | ❓ 待查找 | data.js | 待确认 |
| **地点图标** | ❌ 不适用 | data.js | 新增 ✨ |
| **随机事件** | SelectionDlg.cpp:126+ | data.js | 待确认 |
| **游戏提示** | Tips.txt | tips-data.js | 100% ✅ |
| **滚动新闻** | Ticker.txt | ticker-data.js | 100% ✅ |

---

## 🔧 需要修正的内容

### 高优先级 - 商品名称恢复原汁原味

#### 修改建议
```javascript
// 当前 data.js
export const GOODS = [
    { id: 0, name: '盗版VCD', icon: '💿', basePrice: 15 },
    { id: 1, name: '山西假白酒', icon: '🍶', basePrice: 300 },
    { id: 2, name: '进口玩具', icon: '🧸', basePrice: 200 },
    { id: 3, name: '走私汽车', icon: '🚗', basePrice: 10000 },
    { id: 4, name: '禁书《上海小宝贝》', icon: '📕', basePrice: 1800 },
    { id: 5, name: '进口香烟', icon: '🚬', basePrice: 150 },
    { id: 6, name: '水货手机', icon: '📱', basePrice: 1500 },
    { id: 7, name: '伪劣化妆品', icon: '💄', basePrice: 25 }
];

// 建议修改为（更原汁原味）
export const GOODS = [
    { id: 0, name: '盗版VCD和游戏', icon: '💿', basePrice: 15 },  // ✅ 恢复完整名称
    { id: 1, name: '假白酒', icon: '🍶', basePrice: 300 },         // ✅ 简化名称
    { id: 2, name: '进口玩具', icon: '🧸', basePrice: 200 },
    { id: 3, name: '走私汽车', icon: '🚗', basePrice: 10000 },
    { id: 4, name: '《上海小宝贝》(禁书)', icon: '📕', basePrice: 1800 },  // ✅ 还原格式
    { id: 5, name: '进口香烟', icon: '🚬', basePrice: 150 },
    { id: 6, name: '水货手机', icon: '📱', basePrice: 1500 },
    { id: 7, name: '伪劣化妆品', icon: '💄', basePrice: 25 }
];
```

---

## 🔍 下一步调查

### 待查找的数据

1. **地点列表**
   - 搜索关键词：`中关村`, `西单`, `Location`, `Place`
   - 可能文件：其他.cpp文件、.rc资源文件

2. **价格基准**
   - 搜索：`basePrice`, `price`, `初始价格`
   - 目的：确认Web版价格是否与原版一致

3. **随机事件详情**
   - 解析SelectionDlg.cpp中的事件数组
   - 需要正确的GBK编码转换

4. **房屋数据**
   - 搜索：`房子`, `租金`, `容量`, `House`, `Rent`

---

## 📝 修正方案

### 方案A：完全还原（推荐）
恢复所有商品名称为原版形式，包括括号和中文标点

**优点**: 
- ✅ 原汁原味
- ✅ 保留原作者创意
- ✅ 完整的历史感

**缺点**:
- ⚠️ 名称稍长

### 方案B：保持现状
维持当前简化的商品名称

**优点**:
- ✅ 更简洁
- ✅ UI显示友好

**缺点**:
- ❌ 失去原味
- ❌ 不符合"原汁原味"理念

---

## 💡 发现总结

### 关键发现
1. ✅ **商品数据已找到**: SelectionDlg.cpp:352-360
2. ⚠️ **有细微差异**: 商品名称有修改和简化
3. ❓ **地点数据待查**: 需要继续查找
4. ❓ **随机事件待解析**: 编码问题需解决

### 建议行动
1. **立即修正**: 更新data.js中的商品名称为原版
2. **继续查找**: 定位地点数据的原始位置
3. **解析事件**: 正确转换随机事件数据
4. **验证价格**: 对比价格设定是否合理

---

**分析完成时间**: 2025-12-26  
**分析人**: Claude with Sam  
**下一步**: 修正商品名称 + 查找地点数据
